apiVersion: v1
kind: ConfigMap
metadata:
  name: grafana-dashboards
  labels:
    app: grafana
    grafana_dashboard: "1"
data:
  cluster-overview.json: |
    {
      "annotations": {
        "list": [
          {
            "builtIn": 1,
            "datasource": {
              "type": "grafana",
              "uid": "-- Grafana --"
            },
            "enable": true,
            "hide": true,
            "iconColor": "rgba(0, 211, 255, 1)",
            "name": "Annotations & Alerts",
            "type": "dashboard"
          }
        ]
      },
      "editable": true,
      "fiscalYearStartMonth": 0,
      "graphTooltip": 0,
      "id": 2,
      "links": [],
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 0,
            "y": 0
          },
          "id": 24,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(\n  sum by (node) (\n    rate(container_cpu_usage_seconds_total{container!~\"POD|\",job=\"kubelet\"}[1m])\n  )\n  unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n)\n/\n(\n  sum(\n    sum by (node) (\n      kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n    )\n    unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n  )\n) * 100",
              "format": "table",
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "CPU Used / Allocated %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 3,
            "y": 0
          },
          "id": 23,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(\n  sum(\n      sum by (node) (\n            sum by (namespace, pod, node) (\n              kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n            )\n          * on (namespace, pod) group_left ()\n            max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n        * on (namespace, pod) group_left ()\n          max by (namespace, pod) (\n            kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n          )\n      )\n    unless\n      sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n  )\n)\n/\n(\n  sum(\n    sum by (node) (\n      kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n    )\n    unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n  )\n) * 100",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "CPU Requested / Allocated %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 6,
            "y": 0
          },
          "id": 22,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(\n  sum by (node) (\n    rate(container_cpu_usage_seconds_total{container!~\"POD|\",job=\"kubelet\"}[1m])\n  )\n  unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n)\n/\n(\n  sum(\n      sum by (node) (\n            sum by (namespace, pod, node) (\n              kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n            )\n          * on (namespace, pod) group_left ()\n            max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n        * on (namespace, pod) group_left ()\n          max by (namespace, pod) (\n            kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n          )\n      )\n    unless\n      sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n  )\n) * 100",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "CPU Used / Requested %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 9,
            "y": 0
          },
          "id": 27,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(\n      sum(\n            sum by (namespace, node, pod) (\n              container_memory_working_set_bytes{container!~\"POD|\",job=\"kubelet\"}\n            )\n        unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n      ) / (1000*1000*1000))\n/\n((\n          sum(\n                sum by (namespace, pod, node) (\n                  kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                )\n          unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n        )\n      ) / (1000*1000*1000))\n*100",
              "format": "table",
              "instant": true,
              "legendFormat": "__auto",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Memory Used / Allocated %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 12,
            "y": 0
          },
          "id": 25,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "    (\n        sum(\n            sum by (namespace, node, pod) (container_memory_working_set_bytes{container!~\"POD|\",job=\"kubelet\"})\n          unless\n            sum(kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n        )\n      /\n        (1000 * 1000 * 1000)\n    )\n  /\n    (\n        sum(\n          (\n            sum(\n                  sum by (namespace, pod, node) (\n                    kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                  )\n                * on (namespace, pod) group_left ()\n                  max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n              unless\n                sum(kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n            )\n          )\n        )\n      /\n        (1000 * 1000 * 1000)\n    )\n*\n  100",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Memory Used / Requested %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              },
              "unit": "percent"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 15,
            "y": 0
          },
          "id": 26,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(  (\n      (\n          sum(\n                sum by (namespace, pod, node) (\n                  kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                )\n              * on (namespace, pod) group_left ()\n                max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n          unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n        )\n      )\n  ) / (1000*1000*1000))\n/\n((\n          sum(\n                sum by (namespace, pod, node) (\n                  kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                )\n          unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n        )\n      ) / (1000*1000*1000))\n* 100",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Memory Requested / Allocated %",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 18,
            "y": 0
          },
          "id": 28,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(\n    (sum by (node) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=~\"Running\"}))\n  unless\n    (\n      sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n    )\n)",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Running Pods",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  }
                ]
              },
              "unit": "none"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 5,
            "w": 3,
            "x": 21,
            "y": 0
          },
          "id": 29,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum(\n  (\n      count by (node) (kube_node_labels{job=\"kube-state-metrics\"})\n    unless\n      (\n        sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n      )\n  )\n)",
              "format": "table",
              "instant": true,
              "legendFormat": "Used / Requested %",
              "range": false,
              "refId": "A"
            }
          ],
          "title": "Nodes count",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${recods}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 0,
            "y": 5
          },
          "id": 31,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${recods}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json\n| scope \"summary\"\n| project \"total_current_cpu_requests\"",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Current total CPU request",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${recods}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 6,
            "y": 5
          },
          "id": 32,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${recods}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json\n| scope \"summary\"\n| project \"total_cpu_differences\"",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Enabling autopilot will reduce CPU by",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${recods}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 12,
            "y": 5
          },
          "id": 33,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${recods}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json\n| scope \"summary\"\n| project div(\"total_current_memory_requests\",1000)",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Current total Memory request (GB)",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${recods}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "decimals": 0,
              "mappings": [],
              "max": 100,
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  },
                  {
                    "color": "orange",
                    "value": 20
                  },
                  {
                    "color": "yellow",
                    "value": 40
                  },
                  {
                    "color": "green",
                    "value": 60
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 4,
            "w": 6,
            "x": 18,
            "y": 5
          },
          "id": 34,
          "options": {
            "colorMode": "value",
            "graphMode": "area",
            "justifyMode": "auto",
            "orientation": "auto",
            "percentChangeColorMode": "standard",
            "reduceOptions": {
              "calcs": [
                "lastNotNull"
              ],
              "fields": "",
              "values": false
            },
            "showPercentChange": false,
            "textMode": "auto",
            "wideLayout": true
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${recods}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json\n| scope \"summary\"\n| project div(\"total_memory_differences\",1000)",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Enabling autopilot will reduce memory by",
          "type": "stat"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 0,
            "y": 9
          },
          "id": 2,
          "options": {
            "legend": {
              "calcs": [
                "last"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "sum(\n  sum by (node) (\n    rate(container_cpu_usage_seconds_total{container!~\"POD|\",job=\"kubelet\"}[1m])\n  )\n  unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n)",
              "legendFormat": "Utilised",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "(\n  sum(\n      sum by (node) (\n            sum by (namespace, pod, node) (\n              kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n            )\n          * on (namespace, pod) group_left ()\n            max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n        * on (namespace, pod) group_left ()\n          max by (namespace, pod) (\n            kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n          )\n      )\n    unless\n      sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n  )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "Requested",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "(\n  sum(\n    sum by (node) (\n      kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n    )\n    unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n  )\n)",
              "hide": false,
              "instant": false,
              "legendFormat": "Allocatable",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "CPU Utilised / Requested / Allocatable",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "red",
                    "value": 0
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 10,
            "w": 12,
            "x": 12,
            "y": 9
          },
          "id": 13,
          "options": {
            "legend": {
              "calcs": [
                "last"
              ],
              "displayMode": "table",
              "placement": "right",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "(\n  sum(\n    sum by (node) (\n      container_memory_working_set_bytes{container!~\"POD|\",job=\"kubelet\"}\n    )\n    unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n  ) / (1000*1000*1000))",
              "legendFormat": "Utilised",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "(\n        (\n          sum(\n              sum by (node) (\n                    sum by (namespace, pod, node) (\n                      kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                    )\n                  * on (namespace, pod) group_left ()\n                    max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n                * on (namespace, pod) group_left ()\n                  max by (namespace, pod) (\n                    kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n                  )\n              )\n            unless\n              sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n          )\n        )\n      /\n        (1000 * 1000 * 1000)\n    )",
              "hide": false,
              "instant": false,
              "legendFormat": "Requested",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "((\n  sum(\n    sum by (node) (\n                  kube_node_status_allocatable{container!=\"\",job=\"kube-state-metrics\",resource=\"memory\"}\n                )\n    unless sum by (node) (kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} > 0)\n  )\n) / (1000*1000*1000))",
              "hide": false,
              "instant": false,
              "legendFormat": "Allocatable",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Memory Utilised / Requested / Allocatable",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "fixedColor": "#808080",
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": true,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisGridShow": true,
                "axisLabel": "CPU cores",
                "axisPlacement": "auto",
                "fillOpacity": 45,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineWidth": 0,
                "scaleDistribution": {
                  "type": "linear"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "percentage",
                "steps": [
                  {
                    "color": "blue",
                    "value": 0
                  }
                ]
              },
              "unit": "core"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 17,
            "w": 24,
            "x": 0,
            "y": 19
          },
          "id": 14,
          "options": {
            "barRadius": 0,
            "barWidth": 0.32,
            "fullHighlight": false,
            "groupWidth": 0.7,
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "right",
              "showLegend": true
            },
            "orientation": "vertical",
            "showValue": "auto",
            "stacking": "normal",
            "text": {},
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            },
            "xField": "node",
            "xTickLabelRotation": 90,
            "xTickLabelSpacing": 0
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "sum by (node) (\n  sum by (namespace, pod, node) (\n    kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n  )\n  * on (namespace, pod) group_left ()\n    max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n  * on (namespace, pod) group_left ()\n    max by (namespace, pod) (\n      kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n    )\n  )\nunless\n  (sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0))",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "Space {{node}}",
              "range": false,
              "refId": "Requested"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "exemplar": false,
              "expr": "(sum by (node, core) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"cpu\"})\n- on (node) group_left ()\n(\n  sum by (node) (\n    sum by (namespace, pod, node) (\n      kube_pod_container_resource_requests{container!=\"\",job=\"kube-state-metrics\",resource=\"cpu\"}\n    )\n    * on (namespace, pod) group_left ()\n    max by (namespace, pod) (kube_pod_status_phase{job=\"kube-state-metrics\",phase=\"Running\"} > 0)\n    * on (namespace, pod) group_left ()\n    max by (namespace, pod) (\n      kube_pod_info{created_by_name!=\"autopilot-pause-daemonset\",job=\"kube-state-metrics\"}\n    )\n  )\n))\nunless\n  (sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0))",
              "format": "table",
              "hide": false,
              "instant": true,
              "legendFormat": "Requested {{node}}",
              "range": false,
              "refId": "Free space"
            }
          ],
          "title": "Node CPU",
          "transformations": [
            {
              "id": "concatenate",
              "options": {
                "frameNameLabel": "frame",
                "frameNameMode": "label"
              }
            }
          ],
          "type": "barchart"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${recods}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto",
                  "wrapText": true
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 80.0066
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Namespace"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 155
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "CPU usage 7d (pmax/p99/p90/p75/p50)"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 186
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Owner Requested Gap"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 171
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "CPU autoscaled"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 184
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 27,
            "w": 24,
            "x": 0,
            "y": 36
          },
          "id": 30,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Blocking Karpenter"
              }
            ]
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [
                {
                  "selector": "workload_namespace",
                  "text": "Namespace",
                  "type": "string"
                },
                {
                  "selector": "workload_name",
                  "text": "Name",
                  "type": "string"
                },
                {
                  "selector": "container_name",
                  "text": "Container",
                  "type": "string"
                },
                {
                  "selector": "cpu_usage_7_days",
                  "text": "CPU usage 7d (pmax/p99/p90/p75/p50)",
                  "type": "string"
                },
                {
                  "selector": "spiky_ratio",
                  "text": "Spiky Ratio",
                  "type": "string"
                },
                {
                  "selector": "contribution_to_total_requested",
                  "text": "Contribution %",
                  "type": "string"
                },
                {
                  "selector": "priority",
                  "text": "Priority",
                  "type": "string"
                },
                {
                  "selector": "autoscaling_on_cpu",
                  "text": "CPU autoscaled",
                  "type": "boolean"
                },
                {
                  "selector": "workload_type",
                  "text": "Type",
                  "type": "string"
                }
              ],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${recods}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json \n| scope \"analysis\"\n| extend \"Workload\"=strcat(\"workload_type\", '/', \"workload_name\")\n| project \"Namespace\"=\"workload_namespace\", \"Workload\", \"Pod Name\"=\"pod_name\", \"Container\"=\"container_name\", \"CPU usage 7d (pmax/p99/p90/p75/p50)\"=\"cpu_usage_7_days\", \"CPU autoscaled\"=\"autoscaling_on_cpu\", \"Blocking Karpenter\"=\"blocking_karpenter\", \"CPU Requested\"=\"current_requested_cpu\", \"CPU Recommended\"=\"recommended_cpu\", \"CPU Diff\"=\"cpu_difference\",\"Memory Requested (MB)\"=\"current_requested_memory\",\"Memory Recommended (MB)\"=\"recommended_memory\",\"Memory Difference (MB)\"=\"memory_difference\"",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Pod level analysis",
          "type": "table"
        },
        {
          "datasource": {
            "type": "yesoreyeram-infinity-datasource",
            "uid": "${infds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "thresholds"
              },
              "custom": {
                "align": "auto",
                "cellOptions": {
                  "type": "auto",
                  "wrapText": true
                },
                "inspect": false
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 80.0066
                  }
                ]
              }
            },
            "overrides": [
              {
                "matcher": {
                  "id": "byName",
                  "options": "Namespace"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 155
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "CPU usage 7d (pmax/p99/p90/p75/p50)"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 186
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "Owner Requested Gap"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 171
                  }
                ]
              },
              {
                "matcher": {
                  "id": "byName",
                  "options": "CPU autoscaled"
                },
                "properties": [
                  {
                    "id": "custom.width",
                    "value": 184
                  }
                ]
              }
            ]
          },
          "gridPos": {
            "h": 27,
            "w": 24,
            "x": 0,
            "y": 63
          },
          "id": 1,
          "options": {
            "cellHeight": "sm",
            "footer": {
              "countRows": false,
              "fields": "",
              "reducer": [
                "sum"
              ],
              "show": false
            },
            "showHeader": true,
            "sortBy": [
              {
                "desc": true,
                "displayName": "Spike Range (predicted_max-p50_10min)"
              }
            ]
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "columns": [
                {
                  "selector": "workload_namespace",
                  "text": "Namespace",
                  "type": "string"
                },
                {
                  "selector": "workload_name",
                  "text": "Name",
                  "type": "string"
                },
                {
                  "selector": "container_name",
                  "text": "Container",
                  "type": "string"
                },
                {
                  "selector": "cpu_usage_7_days",
                  "text": "CPU usage 7d (pmax/p99/p90/p75/p50)",
                  "type": "string"
                },
                {
                  "selector": "spiky_ratio",
                  "text": "Spiky Ratio",
                  "type": "string"
                },
                {
                  "selector": "contribution_to_total_requested",
                  "text": "Contribution %",
                  "type": "string"
                },
                {
                  "selector": "priority",
                  "text": "Priority",
                  "type": "string"
                },
                {
                  "selector": "autoscaling_on_cpu",
                  "text": "CPU autoscaled",
                  "type": "boolean"
                },
                {
                  "selector": "workload_type",
                  "text": "Type",
                  "type": "string"
                }
              ],
              "datasource": {
                "type": "yesoreyeram-infinity-datasource",
                "uid": "${infds}"
              },
              "filters": [],
              "format": "table",
              "global_query_id": "",
              "parser": "uql",
              "refId": "A",
              "root_selector": "",
              "source": "url",
              "type": "json",
              "uql": "parse-json \n| extend \"Workload\"=strcat(\"workload_type\", '/', \"workload_name\")\n| project \"Namespace\"=\"workload_namespace\", \"Workload\", \"Container\"=\"container_name\", \"CPU usage 7d (pmax/p99/p90/p75/p50)\"=\"cpu_usage_7_days\", \"Spike Range (predicted_max-p50_10min)\"=\"spike_range\", \"Owner Requested Gap\"=\"request_gap\", \"CPU autoscaled\"=\"autoscaling_on_cpu\", \"Blocking Karpenter\"=\"blocking_karpenter\"",
              "url": "",
              "url_options": {
                "data": "",
                "method": "GET"
              }
            }
          ],
          "title": "Workload Stats",
          "type": "table"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 90
          },
          "id": 21,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "count(\n    (\n        kube_pod_container_status_last_terminated_reason{job=\"kube-state-metrics\",reason=\"OOMKilled\"}\n      * on (namespace, pod) group_left (node)\n        kube_pod_info{job=\"kube-state-metrics\"}\n    )\n  unless\n    sum by (node) (kube_node_status_allocatable{job=\"kube-state-metrics\",resource=\"nvidia_com_gpu\"} > 0)\n)",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "OOM events count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 90
          },
          "id": 5,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "sum(max(node_load1{job=\"node-exporter\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \nsum(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n* 100",
              "legendFormat": "Avg cluster load (%)",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max((max(node_load1{job=\"node-exporter\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \n(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n) * 100",
              "hide": false,
              "instant": false,
              "legendFormat": "Max across nodes (%)",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "min((max(node_load1{job=\"node-exporter\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \n(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n) * 100",
              "hide": false,
              "instant": false,
              "legendFormat": "Min across nodes (%)",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Cluster load1 (%)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 16,
            "y": 90
          },
          "id": 15,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(max(rate(node_pressure_cpu_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "legendFormat": "Max waiting (%)",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "avg(max(rate(node_pressure_cpu_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg waiting (%)",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "Cluster node cpu waiting %",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 0.4
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 98
          },
          "id": 4,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "(sum(sum(rate(container_cpu_cfs_throttled_seconds_total{job=\"kubelet\", container!=\"\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node)) / sum(sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode!=\"idle\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node)))",
              "legendFormat": "Avg Throttle rate / CPU Usage",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(sum(rate(container_cpu_cfs_throttled_seconds_total{job=\"kubelet\", container!=\"\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node) / sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode!=\"idle\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))",
              "hide": false,
              "instant": false,
              "legendFormat": "Max Throttle rate / CPU Usage",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "min(sum(rate(container_cpu_cfs_throttled_seconds_total{job=\"kubelet\", container!=\"\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node) / sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode!=\"idle\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))",
              "hide": false,
              "instant": false,
              "legendFormat": "Min Throttle rate / CPU Usage",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Throttle seconds rate / CPU seconds rate",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 98
          },
          "id": 17,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(max(rate(node_pressure_io_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "legendFormat": "Max waiting (%)",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "avg(max(rate(node_pressure_io_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg waiting (%)",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(max(rate(node_pressure_io_stalled_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Max stalled (%)",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "avg(max(rate(node_pressure_io_stalled_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg stalled (%)",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Cluster node io pressure %",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "log": 2,
                  "type": "log"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "dark-red",
                    "value": 0
                  },
                  {
                    "color": "green",
                    "value": 10
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 7,
            "w": 8,
            "x": 16,
            "y": 98
          },
          "id": 20,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "sum(sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode=\"idle\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \nsum(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n* 100",
              "hide": false,
              "legendFormat": "Avg cluster load (%)",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max((sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode=\"idle\"}[$__rate_interval])) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \n(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n* 100)",
              "hide": false,
              "instant": false,
              "legendFormat": "Max across nodes (%)",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "min((sum(rate(node_cpu_seconds_total{job=\"node-exporter\", mode=\"idle\"}[$__rate_interval])) by (node) unless on (node) sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n/ \n(max(kube_node_status_capacity{job=\"kube-state-metrics\", resource=\"cpu\"}) by (node) unless on (node) sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n* 100)",
              "hide": false,
              "instant": false,
              "legendFormat": "Min across nodes (%)",
              "range": true,
              "refId": "C"
            }
          ],
          "title": "Node idle CPU (%)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "dashed+area"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 90
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 9,
            "w": 8,
            "x": 16,
            "y": 105
          },
          "id": 16,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(max(rate(node_pressure_memory_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "legendFormat": "Max waiting (%)",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "avg(max(rate(node_pressure_memory_waiting_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg waiting (%)",
              "range": true,
              "refId": "B"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "max(max(rate(node_pressure_memory_stalled_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Max stalled (%)",
              "range": true,
              "refId": "C"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "avg(max(rate(node_pressure_memory_stalled_seconds_total{job=\"node-exporter\"}[1m]) * 100) by (node) unless sum(kube_node_status_allocatable{resource=\"nvidia_com_gpu\", job=\"kube-state-metrics\"} == 1) by (node))\n",
              "hide": false,
              "instant": false,
              "legendFormat": "Avg stalled (%)",
              "range": true,
              "refId": "D"
            }
          ],
          "title": "Cluster node memory pressure %",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 0,
            "y": 106
          },
          "id": 18,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "count(kube_pod_container_status_last_terminated_reason{reason=\"OOMKilled\"})",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "OOM events count",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "${promds}"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisBorderShow": false,
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "barWidthFactor": 0.6,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "insertNulls": false,
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green",
                    "value": 0
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 8,
            "x": 8,
            "y": 106
          },
          "id": 19,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "hideZeros": false,
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "12.1.1",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "${promds}"
              },
              "editorMode": "code",
              "expr": "sum by (node, condition) (min_over_time(kube_node_status_condition{status!=\"false\", condition=~\"DiskPressure|MemoryPressure|PIDPressure\"}[2m:]) == 1)",
              "legendFormat": "{{condition}} - {{node}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "Nodes undergoing pressure",
          "type": "timeseries"
        }
      ],
      "preload": false,
      "schemaVersion": 41,
      "tags": [],
      "templating": {
        "list": [
          {
            "allowCustomValue": true,
            "current": {
              "text": "Prometheus-tfy-usea1-aviso-prod",
              "value": "P47BEE8935E078080"
            },
            "description": "",
            "label": "Prometheus Data Source",
            "name": "promds",
            "options": [],
            "query": "prometheus",
            "refresh": 1,
            "regex": "",
            "type": "datasource"
          },
          {
            "current": {
              "text": "Infinity-tfy-prod-euwe1",
              "value": "PD1BE5C0E79E59B4B"
            },
            "label": "Infinity DataSource",
            "name": "infds",
            "options": [],
            "query": "yesoreyeram-infinity-datasource",
            "refresh": 1,
            "regex": "/^Infinity-/",
            "type": "datasource"
          },
          {
            "current": {
              "text": "Recommendation-tfy-prod-euwe1",
              "value": "PCD6E4E8D3AEB0D6C"
            },
            "label": "Recommendation Data Source",
            "name": "recods",
            "options": [],
            "query": "yesoreyeram-infinity-datasource",
            "refresh": 1,
            "regex": "/^Recommendation-/",
            "type": "datasource"
          }
        ]
      },
      "time": {
        "from": "now-5m",
        "to": "now"
      },
      "timepicker": {},
      "timezone": "browser",
      "title": "Cluster",
      "uid": "34928f12-e16e-45a7-8175-3b441ea4e7df",
      "version": 12
    }